<div class="relative w-full overflow-hidden pb-[13vh]">
  <div class="flex h-full min-h-72 w-full flex-col items-center justify-center border-b border-[#717171] bg-[#212529] bg-[radial-gradient(circle,rgba(0,0,0,0.1)_0,rgba(0,0,0,0.5)_100%)] bg-no-repeat p-8 text-[#ff5722] max-sm:p-4">
    <h1 class="mb-0 font-bona text-7xl max-sm:text-5xl">Projects</h1>
  </div>

  <div class="flex flex-col items-center p-8 max-sm:p-4">
    <div class="absolute top-0 -left-[5000%] -z-10 flex h-[999in] w-[9999%] items-center justify-center">
      <svg width="150%" height="150%" xmlns="http://www.w3.org/2000/svg" class="-rotate-6">
        <defs>
          <pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse">
            <path d="M 80 0 L 0 0 0 80" fill="none" stroke="#717171" stroke-width="1" />
          </pattern>
        </defs>

        <rect width="150%" height="150%" fill="url(#grid)" />
      </svg>
    </div>

    <div class="-mt-8  w-full flex max-w-[80rem] flex-col gap-8 py-8 max-sm:max-w-full">
      <div class="mb-5 flex w-full gap-8 rounded-md border border-[#717171] bg-[#212529] p-4 shadow-[0px_1rem_3rem_0px_#4a474780] shadow-neutral-900 max-lg:flex-wrap">
        <div class="flex flex-grow-[9999] flex-col gap-4">
          <div class="flex flex-wrap w-full gap-2 lg:gap-4">
            <div class="flex w-[calc(50%-0.5rem)] min-w-fit flex-grow items-center gap-2">
              <label for="groups">Group:</label>
              <select [(ngModel)]="search_group" id="groups" class="block w-fit flex-grow cursor-pointer rounded-md border border-gray-600 bg-gray-700 p-1.5 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500">
                <option value="all" selected>All projects</option>
                <option value="Personal projects">Personal projects</option>
                <option value="TOP - The Odin Project">TOP - The Odin Project</option>
                <option value="FM - Frontend Mentor">FM - Frontend Mentor</option>
                <option value="UR - University of Rzeszów">UR - University of Rzeszów</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="relative flex w-[calc(50%-0.5rem)] min-w-fit flex-grow items-center">
              <i class="absolute text-sm fa-solid fa-magnifying-glass left-3"></i>
              <input [(ngModel)]="search_text" type="text" class="w-full rounded-md border border-[#717171] bg-[#212529] p-1.5 px-6 pl-9 max-md:w-full" placeholder="Search text..." />
            </div>
          </div>

          <div class="flex flex-wrap w-full gap-2 mt-1 -mb-1">
            <div class="flex w-fit gap-1.5 border-r border-[#717171] pr-2">
              Search
              <select [(ngModel)]="skills_conjunction" id="skills" class="block w-fit cursor-pointer rounded-md border border-gray-600 bg-gray-700 p-0.5 pr-0.5 text-sm font-bold text-white placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500">
                <option value="one" class="font-bold" selected>One</option>
                <option value="all" class="font-bold">All</option>
              </select>
              of the skills
            </div>

            <button (click)="clearSkills()" class="flex cursor-pointer items-center justify-center gap-1.5 underline-offset-2 hover:text-[#ff5722]">
              <i class="fa-solid fa-xmark -mb-0.5"></i>
              Clear all
            </button>
          </div>

          <div class="flex flex-wrap flex-shrink w-full gap-2">
            @for (skill of search_skills; track $index) {
              <div class="relative flex items-center p-1 px-3 pr-8 overflow-hidden text-xs font-bold uppercase rounded-md bg-slate-600 text-slate-100">
                {{ skill }}
                <i (click)="removeSkill(skill)" class="fa-solid fa-xmark absolute right-0 flex h-full w-6 cursor-pointer items-center justify-center bg-gray-700 text-sm hover:text-[#ff5722]"></i>
              </div>
            }

            <select (input)="addSkill(skill.value)" (change)="skill.value = ''" #skill id="skill" class="rounded-md border border-[#717171] bg-[#212529] p-1 px-1.5 text-xs font-bold uppercase text-slate-100">
              <option value="" class="text-sm uppercase" selected disabled>Add skill...</option>

              @for (skill of filtered_skills; track $index) {
                <option value="{{ skill }}" class="text-sm uppercase">{{ skill }}</option>
              }
            </select>
          </div>
        </div>

        <div class="flex flex-grow gap-2 max-md:w-full max-sm:flex-col lg:flex-col">
          <button (click)="applyFilter()" class="flex w-full cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded-md border border-white p-1.5 px-6 font-bold text-white transition-colors duration-150 hover:bg-green-700">Show results</button>
          <button (click)="resetFilter()" class="flex w-full cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded-md border border-white p-1.5 px-6 font-bold text-white transition-colors duration-150 hover:bg-red-700">Reset</button>
        </div>
      </div>

      @for (project_data of filtered_projects; track $index) {
        @if (!project_data.hidden) {
          <app-project [project]="project_data" [id]="$index"></app-project>
        }
      } @empty {
        <div class="text-2xl text-center">No projects found. Try different filters.</div>
      }
    </div>
  </div>
</div>

<app-footer></app-footer>
